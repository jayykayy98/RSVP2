<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/style.css">
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <title>Aida dan Firdaus</title>
</head>

<body>
    <div class="wrapper">
        <!-- Overlay Section -->
        <div id="overlay" class="overlay">
            <div class="overlay-content">
                <button id="toggle-content" class="toggle-button">
                    <p>Aida</p>
                    <p>Firdaus</p>
                    <p class="buka">Buka</p>
                </button>
            </div>
        </div>
        
        <!-- Intro Section -->
        <div class="card">
            <div class="petal-container"></div>

            <section class="intro">
                <div class="content">
                    <img src="./images/bismillah.png" alt="Bismillah" class="fade-top-1">
                    <p class="title fade-top-2">Walimatul urus</p>
                    <h2 class="fade-top-3">Aida</h2>
                    <h2 class="fade-top-3">&</h2>
                    <h2 class="fade-top-3">Firdaus</h2>
                    <p class="date fade-top-4">
                        <span>Ahad</span> | <span>14 September 2025</span>
                    </p>
                </div>
            </section>

            <!-- Event Info Section -->
            <section class="info">
                <img src="./images/assalamualaikum-3.png" alt="Assalamualaikum" class="assalamualaikum reveal fade-bottom">
                <div class="event-info reveal fade-bottom">
                    <div class="one">
                        <p>Dengan penuh kesyukuran kami menjemput</p>
                        <div class="parent">
                            <p>Mohamad Zuraidi Bin Ain</p>
                            <p>& Norma Binti Abdul Wahab</p>
                        </div>
                        <p>Untuk hadir ke majlis perkahwinan puteri kami</p>
                    </div>
                    <div class="two">
                        <p>Nurul Syuhaini Aida</p>
                        <p>& Mohamad Firdaus</p>
                    </div>
                    <div class="three">
                        <p class="title">Tempat</p>
                        <p>D'Sayang Event Hall and Homestay, Parit Buntar</p>
                    </div>
                    <div class="four">
                        <p class="title">Tarikh</p>
                        <p>Ahad 14 September 2025</p>
                    </div>
                    <div class="five">
                        <p class="title">Masa</p>
                        <p>12 PM - 4 PM</p>
                    </div>
                </div>
            </section>

            <!-- Aturcara Section -->
            <section class="aturcara reveal fade-bottom">
                <p class="title">Aturcara Majlis</p>
                <div class="one"><p>Kehadiran Tetamu: 12:30 Pagi</p></div>
                <div class="two"><p>Ketibaan Pengantin: 1:00 Petang</p></div>
                <div class="three"><p>Makan Beradab: 1:30 Petang</p></div>
                <div class="four"><p>Majlis Bersurai: 4:00 Petang</p></div>
            </section>

            <!-- Ucapan Section -->
            <section class="ucapan reveal fade-bottom">
                <div class="container">
                    <img src="./images/ucapan-bg.png" alt="Ucapan Background">
                    <div class="content">
                        <p>Ya Allah, berkatilah majlis perkahwinan ini, limpahkan baraqah dan rahmat kepada kedua mempelai ini...</p>
                    </div>
                </div>
            </section>

            <!-- RSVP Section -->
            <section class="rsvp">
                <h2 class="reveal fade-bottom">Ucapan</h2>
                <div class="container-message reveal fade-bottom">
                    <form id="form-ucapan" class="form-ucapan">
                        <label for="name">Nama Anda</label>
                        <input type="text" name="name" placeholder="Jeon Jungkook" required>
                        
                        <label for="message">Ucapan</label>
                        <textarea name="message" rows="4" placeholder="Selamat pengantin baru..." required></textarea>
                        
                        <button type="submit">Hantar Ucapan</button>
                    </form>

                    <div id="success-message">Terima kasih atas ucapan anda! ðŸ’Œ</div>
                    <h2>Ucapan Terkini</h2>
                    <div id="ucapan-list"></div>
                </div>
            </section>

            <!-- Contact Section -->
            <section class="footer">
                <ul class="menu">
                    <li id="calendar-btn"><i class='bx bx-calendar'></i></li>
                    <li id="location-btn"><i class='bx bx-map'></i></li>
                    <li id="music-btn"><i class='bx bx-music'></i></li>
                    <li id="rsvp-btn"><i class='bx bx-envelope'></i></li>
                    <li id="contact-btn"><i class='bx bx-phone'></i></li>
                </ul>
            </section>
        </div>
    </div>

    <!-- JS Section -->
    <script src="https://unpkg.com/boxicons@2.1.4/dist/boxicons.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tsparticles/1.18.11/tsparticles.min.js"></script>
    <script src="./js/main.js"></script>
    <script>
        const scriptURL = "https://script.google.com/macros/s/AKfycbzIFVa2OrQ1IO-Mc2DprqKLYZgMkg2myn1luZYS8NoPyb0zJ3hYwvd3FsVRjr75MrY/exec";

        document.getElementById("form-ucapan").addEventListener("submit", function (e) {
            e.preventDefault();
            const form = e.target;
            const formData = new FormData(form);
            fetch(scriptURL, { method: "POST", body: formData })
                .then(res => res.text())
                .then(data => {
                    form.reset();
                    const msg = document.getElementById("success-message");
                    msg.style.display = "block";
                    setTimeout(() => msg.style.display = "none", 3000);
                    addUcapanToList(formData.get("name"), formData.get("message"), new Date().toLocaleString());
                })
                .catch(err => alert("Gagal hantar ucapan. Sila cuba lagi."));
        });

        function addUcapanToList(name, message, time) {
            const list = document.getElementById("ucapan-list");
            const div = document.createElement("div");
            div.className = "ucapan-entry";
            div.innerHTML = `<strong>${name}</strong> <small>(${time})</small><em>${message}</em>`;
            list.prepend(div);
        }

        // Load existing ucapan on page load
        window.addEventListener("DOMContentLoaded", () => {
            fetch(scriptURL)
                .then(res => res.json())
                .then(data => {
                    data.reverse().forEach(entry => {
                        addUcapanToList(entry.name, entry.message, new Date(entry.timestamp).toLocaleString());
                    });
                });
        });
    </script>
</body>

</html>
